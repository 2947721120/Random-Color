<!DOCTYPE html>
  <head>
    <title>Random Color</title>
    <link rel="stylesheet" href="style.css">
    <script src="../randomColor.js"></script>
  </head>
  <body>
    <header>
      <h1>Random Colors <button type="button" onclick="renderDemo()">Regenerate</button></h1>
      <p>Returns a random color with an attractive hue and saturation.</p>
      <code>
        randomColor()
        <span class="comment">// Returned '<span class="randomColor" hue="" format="hex"></span>'</span>
      </code>
      <h4>Example output</h4>
      <span class="output" hue="" count="66"></span>
      <div class="clear"></div>
    </header>
    <section>
      <h3>Similar colors</h3>
      <code>
        randomColor({hue: 'orange'})
        <span class="comment">// Returned '<span class="randomColor" hue="orange" format="hex"></span>'</span>
      </code>
      <p>Returns a random orange color</p>
      <span class="output" hue="orange" count="11"></span>
      <div class="clear"></div>
    </section>    
    <section>
      <h3>Contrasting colors</h3>
      <code>
        randomColor({hue: {contrasts: 'orange'}})
        <span class="comment">// Returned '<span class="randomColor" hue="orange" contrasts="true" format="hex"></span>'</span>
      </code>
      <p>Returns a color which contrasts with orange</p>
      <span class="output" hue="orange" contrasts="true" count="11"></span>
      <div class="clear"></div>
    </section>
    <section>
      <h3> Monochrome</h3>
      <code>
        randomColor({hue: 'monochrome'})
        <span class="comment">// Returned '<span class="randomColor" hue="monochrome" format="hex"></span>'</span>
      </code>
      <p>Returns a random grey color</p>
      <span class="output" hue="monochrome" count="11"></span>
      <div class="clear"></div>
    </section>    
    <script>


      var createSwatches = function() {
        
        var outputs = document.querySelectorAll(".output");

        for (var i in outputs) {

          var output = outputs[i],
              count = parseInt(getAttribute(output, 'count')),
              contrasts = false,
              hue = getAttribute(output, 'hue');

          if (getAttribute(output, 'contrasts') === 'true') {
            var contrasts = true
          };

          for (var i = 0; i < count;i++){

            var swatch = document.createElement('span');
                swatch.className = "swatch randomColor";
                swatch.setAttribute('hue', hue);

            if (contrasts) {
                swatch.setAttribute('contrasts', 'true')
            }
            
            // this should be chunked into a 
            // document  fragment
            output.appendChild(swatch);

          }

        };

      };

      createSwatches();

      var renderDemo = function() {

        var demos = document.querySelectorAll(".randomColor");

        for (var i in demos) {
          var options = {},
              demo = demos[i];

          console.log(getAttribute(demo, 'contrasts'));

          if (getAttribute(demo, 'contrasts') === 'true') {
            options['hue'] = {contrasts: getAttribute(demo, 'hue')}
          } else {
            options['hue'] = getAttribute(demo, 'hue');
          };

          options['luminosity'] = getAttribute(demo, 'luminosity');
          options['format'] = getAttribute(demo, 'format');
          
          var color = randomColor(options);

          if (demo.className === 'swatch randomColor') {
            demo.style.background = color;
          } 

          // Append a small color swatch to text demo
          // else {
          //   demo.style.color = color;
          // }

          demo.innerHTML = color.toString();
        }
      };

      renderDemo();

      function getAttribute(node, attribute) {
        for (var i in node.attributes){
          if (attribute === node.attributes[i].name){
            return node.attributes[i].value
          }
        };
      }

    </script>
  </body>
</html>